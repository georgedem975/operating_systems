# Отчет по лабораторной работе №5.
---

__Требования к проведению экспериментов и содержанию отчета
Зафиксируйте в отчете данные о текущей конфигурации операционной системы в 
аспекте управления памятью:__
+ Общий объем оперативной памяти.

![1](https://github.com/georgedem975/operating_systems/blob/master/lab-5/lab5/assets/1.png)
+ Объем раздела подкачки.

![2](https://github.com/georgedem975/operating_systems/blob/master/lab-5/lab5/assets/2.png)
+ Размер страницы виртуальной памяти.

![3](https://github.com/georgedem975/operating_systems/blob/master/lab-5/lab5/assets/3.png)
+ Объем свободной физической памяти в ненагруженной системе.

![4](https://github.com/georgedem975/operating_systems/blob/master/lab-5/lab5/assets/4.png)
+ Объем свободного пространства в разделе подкачки в ненагруженной 
системе.

![5](https://github.com/georgedem975/operating_systems/blob/master/lab-5/lab5/assets/5.png)


---

### Эксперимент №1.

##### ___Подготовительный этап___
Создайте скрипт mem.bash, реализующий следующий сценарий. Скрипт 
выполняет бесконечный цикл. Перед началом выполнения цикла создается пустой 
массив и счетчик шагов, инициализированный нулем. На каждом шаге цикла в 
конец массива добавляется последовательность из 10 элементов, например, (1 2 3 4 5 6 7 8 9 10). На каждом 100000-ом шаге в файл report.log добавляется строка с текущим значением размера массива (перед запуском скрипта файл обнуляется)

__Файл mem.bash__

```shell
#!/bin/bash

: > report.log

mass=(1 2 3 4 5 6 7 8 9 10)

arr=()

i=0

while :
do
        if [[ $(($i % 100000)) -eq 0 ]]; then
                echo ${#arr[@]} >> report.log
        fi
        for j in $mass
        do
                arr+=($j)
        done

        i=$(($i+1))
done
```

##### ___Первый этап___

Задача – оценить изменения параметров, выводимых утилитой top в процессе работы созданного скрипта.

Ход эксперимента:
Запустите созданный скрипт mem.bash. Дождитесь аварийной остановки процесса и вывода в консоль последних сообщений системного журнала.

![6](https://github.com/georgedem975/operating_systems/blob/master/lab-5/lab5/assets/6.png)

Зафиксируйте в отчете последнюю запись журнала - значения параметров, с которыми произошла аварийная остановка процесса. Также зафиксируйте значение в последней строке файла report.log.

![7](https://github.com/georgedem975/operating_systems/blob/master/lab-5/lab5/assets/7.png)

Подготовьте две консоли. В первой запустите утилиту top. Во второй запустите скрипт и переключитесь на первую консоль. Убедитесь, что в ```top``` появился запущенный скрипт. Наблюдайте за следующими значениями (и фиксируйте их изменения во времени в отчете):
+ значения параметров памяти системы (верхние две строки над основной таблицей);
+ значения параметров в строке таблицы, соответствующей работающему скрипту;
+ изменения в верхних пяти процессах (как меняется состав и позиции этих процессов).

```
1m   1972 root      20   0  780612 561128   3020 R  93.8  30.2   3:58.95 sh
1m   1972 root      20   0  911952 692600   3020 R  97.9  37.2   4:57.76 sh
1m   1972 root      20   0 1045536 826184   3020 R  98.1  44.4   5:56.67 sh 
1m   1972 root      20   0 1178460 958976   3020 R  98.0  51.5   6:55.54 sh
1m   1972 root      20   0 1312836   1.0g   3020 R  98.1  58.8   7:54.49 sh
1m   1972 root      20   0 1445364   1.2g   3020 R  98.0  65.9   8:53.33 sh
1m   1972 root      20   0 1581192   1.3g   3020 R  98.2  73.2   9:52.29 sh
1m   1972 root      20   0 1714116   1.4g   3020 R  98.1  80.3  10:51.22 sh
1m   1972 root      20   0 1849680   1.5g   3008 R  97.9  85.5  11:50.05 sh
1m   1972 root      20   0 1984980   1.5g   2736 R  97.9  86.4  12:48.83 sh
1m   1972 root      20   0 2119092   1.2g   1404 R  96.6  69.7  13:46.88 sh
1m   1972 root      20   0 2238420   1.2g   1216 R  78.1  67.1  14:38.95 sh
1m   1972 root      20   0 2251620   1.2g      0 R  14.7  67.7  14:48.02 sh
1m   1972 root      20   0 2252148   1.2g      0 R   6.1  67.8  14:52.09 sh
1m   1972 root      20   0 2252676   1.2g      0 R   5.8  67.8  14:56.85 sh
1m   1972 root      20   0 2253072   1.2g     24 R   6.4  67.8  15:00.99 sh
1m   1972 root      20   0 2253072   1.2g      0 R   6.2  67.8  15:04.83 sh
1m   1972 root      20   0 2253336   1.2g    268 R   6.1  67.8  15:08.85 sh
1m   1972 root      20   0 2253468   1.2g      0 R   6.5  67.8  15:12.87 sh
1m   1972 root      20   0 2254524   1.2g     52 R   7.8  67.9  15:17.76 sh
1m   1972 root      20   0 2254788   1.2g      0 R   6.6  67.9  15:21.98 sh
1m   1972 root      20   0 2255052   1.2g      0 R   6.4  67.9  15:26.17 sh
1m   1972 root      20   0 2255316   1.2g      0 R   6.3  67.9  15:30.22 sh
1m   1972 root      20   0 2255316   1.2g      0 R   6.0  67.9  15:33.98 sh
1m   1972 root      20   0 2256768   1.2g      0 R   7.1  68.0  16:03.47 sh
```

Проводите наблюдения и фиксируйте их в отчете до аварийной остановки процесса скрипта и его исчезновения из перечня процессов в ```top```.
Посмотрите с помощью команды ```dmesg | grep "mem.bash"``` последние две записи о скрипте в системном журнале и зафиксируйте их в отчете.

![8](https://github.com/georgedem975/operating_systems/blob/master/lab-5/lab5/assets/8.png)

Также зафиксируйте значение в последней строке файла ```report.log```.

![9](https://github.com/georgedem975/operating_systems/blob/master/lab-5/lab5/assets/9.png)